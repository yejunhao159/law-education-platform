<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧法学讲台 - 交互式案例教学系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #667eea;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 16px;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            gap: 20px;
        }

        /* 左侧导航 */
        .sidebar {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .module-nav {
            list-style: none;
        }

        .module-nav li {
            margin-bottom: 10px;
        }

        .module-btn {
            width: 100%;
            padding: 12px 16px;
            background: #f7f7f7;
            border: none;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .module-btn:hover {
            background: #667eea;
            color: white;
        }

        .module-btn.active {
            background: #667eea;
            color: white;
        }

        .module-btn .icon {
            font-size: 18px;
        }

        .module-btn .status {
            margin-left: auto;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ddd;
        }

        .module-btn.completed .status {
            background: #4caf50;
        }

        /* 主内容区 */
        .main-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .module-content {
            display: none;
        }

        .module-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .module-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .module-header h2 {
            color: #333;
            font-size: 24px;
            margin-bottom: 10px;
        }

        .module-header p {
            color: #666;
            line-height: 1.6;
        }

        /* AI分析卡片 */
        .ai-analysis-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .ai-analysis-card h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-analysis-card .content {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            line-height: 1.6;
        }

        /* 请求权类型选择 */
        .request-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .request-type-card {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }

        .request-type-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .request-type-card.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* 证据分析 */
        .evidence-container {
            margin: 20px 0;
        }

        .evidence-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            transition: all 0.3s;
        }

        .evidence-item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .evidence-item.dragging {
            opacity: 0.5;
        }

        .evidence-info {
            flex: 1;
        }

        .evidence-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .evidence-purpose {
            color: #666;
            font-size: 14px;
        }

        .evidence-tag {
            padding: 4px 12px;
            background: #667eea;
            color: white;
            border-radius: 20px;
            font-size: 12px;
        }

        /* 要件分组 */
        .requirement-groups {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .requirement-group {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            min-height: 150px;
            border: 2px dashed #ddd;
            transition: all 0.3s;
        }

        .requirement-group.drag-over {
            background: #e8f4fd;
            border-color: #667eea;
        }

        .requirement-group h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 16px;
        }

        /* 争议焦点 */
        .dispute-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .dispute-card.active {
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .dispute-question {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .judge-response {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        .dispute-card.revealed .judge-response {
            display: block;
            animation: slideDown 0.5s;
        }

        @keyframes slideDown {
            from { 
                opacity: 0;
                max-height: 0;
            }
            to { 
                opacity: 1;
                max-height: 500px;
            }
        }

        /* 右侧面板 */
        .right-panel {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            height: fit-content;
        }

        .quick-actions {
            margin-bottom: 30px;
        }

        .quick-actions h3 {
            color: #333;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .action-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .action-btn:hover {
            background: #667eea;
            color: white;
        }

        .action-btn.primary {
            background: #667eea;
            color: white;
        }

        .action-btn.primary:hover {
            background: #5a67d8;
        }

        /* 进度指示器 */
        .progress-indicator {
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.5s;
        }

        .progress-text {
            margin-top: 10px;
            font-size: 14px;
            color: #666;
            text-align: center;
        }

        /* 学生参与功能 */
        .student-participation {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .student-participation h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 16px;
        }

        .qr-placeholder {
            width: 150px;
            height: 150px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
        }

        .participation-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        /* 随机点名功能 */
        .random-picker {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            color: white;
        }

        .picker-display {
            font-size: 28px;
            font-weight: bold;
            margin: 20px 0;
            min-height: 40px;
        }

        .picker-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 10px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .picker-btn:hover {
            transform: scale(1.05);
        }

        /* 浮动提示 */
        .floating-tip {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 300px;
            animation: slideInUp 0.5s;
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .floating-tip h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .floating-tip p {
            color: #666;
            font-size: 14px;
            line-height: 1.5;
        }

        .close-tip {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 头部 -->
        <div class="header">
            <h1>🎓 智慧法学讲台</h1>
            <p class="subtitle">AI驱动的交互式案例教学系统 - 将备课时间从2小时缩短到10分钟</p>
        </div>

        <div class="main-layout">
            <!-- 左侧导航 -->
            <div class="sidebar">
                <h3 style="margin-bottom: 20px; color: #333;">教学模块</h3>
                <ul class="module-nav">
                    <li>
                        <button class="module-btn active" onclick="switchModule('module1', this)">
                            <span class="icon">📖</span>
                            <span>案情导入</span>
                            <span class="status"></span>
                        </button>
                    </li>
                    <li>
                        <button class="module-btn" onclick="switchModule('module2', this)">
                            <span class="icon">🔍</span>
                            <span>证据对质</span>
                            <span class="status"></span>
                        </button>
                    </li>
                    <li>
                        <button class="module-btn" onclick="switchModule('module3', this)">
                            <span class="icon">⚔️</span>
                            <span>焦点攻防</span>
                            <span class="status"></span>
                        </button>
                    </li>
                    <li>
                        <button class="module-btn" onclick="switchModule('module4', this)">
                            <span class="icon">💭</span>
                            <span>苏格拉底提问</span>
                            <span class="status"></span>
                        </button>
                    </li>
                    <li>
                        <button class="module-btn" onclick="switchModule('module5', this)">
                            <span class="icon">🎯</span>
                            <span>总结升华</span>
                            <span class="status"></span>
                        </button>
                    </li>
                </ul>

                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                    <button class="action-btn primary" onclick="generatePPT()">
                        生成完整PPT
                    </button>
                </div>
            </div>

            <!-- 主内容区 -->
            <div class="main-content">
                <!-- 模块1：案情导入 -->
                <div id="module1" class="module-content active">
                    <div class="module-header">
                        <h2>📖 案情导入 - 锚定分析起点</h2>
                        <p>引导学生从"读故事"切换到"找法"的思维模式</p>
                    </div>

                    <div class="ai-analysis-card">
                        <h3>🤖 AI智能分析</h3>
                        <div class="content">
                            系统已自动识别判决书中的关键信息：<br>
                            • 提取"本院查明"部分的全部事实描述<br>
                            • 识别原告诉讼请求和请求权类型<br>
                            • 生成案件时间轴和法律关系图
                        </div>
                    </div>

                    <h3 style="margin: 20px 0;">请求权类型识别</h3>
                    <div class="request-types">
                        <div class="request-type-card selected" onclick="selectRequestType(this)">
                            <h4>合同请求权</h4>
                            <p style="font-size: 14px; color: #666; margin-top: 5px;">基于合同关系的违约责任</p>
                        </div>
                        <div class="request-type-card" onclick="selectRequestType(this)">
                            <h4>侵权请求权</h4>
                            <p style="font-size: 14px; color: #666; margin-top: 5px;">侵权损害赔偿责任</p>
                        </div>
                        <div class="request-type-card" onclick="selectRequestType(this)">
                            <h4>物权请求权</h4>
                            <p style="font-size: 14px; color: #666; margin-top: 5px;">物权保护请求</p>
                        </div>
                        <div class="request-type-card" onclick="selectRequestType(this)">
                            <h4>不当得利请求权</h4>
                            <p style="font-size: 14px; color: #666; margin-top: 5px;">返还不当得利</p>
                        </div>
                    </div>

                    <button class="action-btn" style="margin-top: 20px;" onclick="confirmModule1()">
                        确认并进入下一模块
                    </button>
                </div>

                <!-- 模块2：证据对质 -->
                <div id="module2" class="module-content">
                    <div class="module-header">
                        <h2>🔍 证据对质 - 目的驱动的质证</h2>
                        <p>训练学生的核心诉讼技能——证据分析</p>
                    </div>

                    <div class="ai-analysis-card">
                        <h3>🤖 AI智能分析</h3>
                        <div class="content">
                            系统已提取判决书中的所有证据，并分析其"三性"认定<br>
                            请将证据拖拽到对应的构成要件分组中
                        </div>
                    </div>

                    <h3 style="margin: 20px 0;">证据列表（可拖拽）</h3>
                    <div class="evidence-container">
                        <div class="evidence-item" draggable="true" ondragstart="drag(event)" data-evidence="1">
                            <div class="evidence-info">
                                <div class="evidence-name">购销合同</div>
                                <div class="evidence-purpose">证明双方存在合同关系</div>
                            </div>
                            <span class="evidence-tag">真实性✓</span>
                        </div>
                        <div class="evidence-item" draggable="true" ondragstart="drag(event)" data-evidence="2">
                            <div class="evidence-info">
                                <div class="evidence-name">银行转账记录</div>
                                <div class="evidence-purpose">证明原告已履行付款义务</div>
                            </div>
                            <span class="evidence-tag">关联性✓</span>
                        </div>
                        <div class="evidence-item" draggable="true" ondragstart="drag(event)" data-evidence="3">
                            <div class="evidence-info">
                                <div class="evidence-name">送货单</div>
                                <div class="evidence-purpose">证明被告未完全履行交货义务</div>
                            </div>
                            <span class="evidence-tag">合法性✓</span>
                        </div>
                    </div>

                    <h3 style="margin: 20px 0;">构成要件分组</h3>
                    <div class="requirement-groups">
                        <div class="requirement-group" ondrop="drop(event)" ondragover="allowDrop(event)">
                            <h4>要件一：存在合法有效的合同</h4>
                            <div class="dropped-evidence"></div>
                        </div>
                        <div class="requirement-group" ondrop="drop(event)" ondragover="allowDrop(event)">
                            <h4>要件二：存在违约行为</h4>
                            <div class="dropped-evidence"></div>
                        </div>
                        <div class="requirement-group" ondrop="drop(event)" ondragover="allowDrop(event)">
                            <h4>要件三：造成损失</h4>
                            <div class="dropped-evidence"></div>
                        </div>
                    </div>
                </div>

                <!-- 模块3：焦点攻防 -->
                <div id="module3" class="module-content">
                    <div class="module-header">
                        <h2>⚔️ 焦点攻防与裁判解构</h2>
                        <p>模拟法官的裁判思路，完成认知闭环</p>
                    </div>

                    <div class="dispute-card">
                        <div class="dispute-question">
                            争议焦点1：合同是否有效？
                        </div>
                        <button class="action-btn" onclick="revealJudgeResponse(this)">
                            查看法官如何回应
                        </button>
                        <div class="judge-response">
                            <h4>法官说理：</h4>
                            <p>关于合同效力问题，本院认为：双方签订的购销合同系双方真实意思表示，内容不违反法律、行政法规的强制性规定，应为有效合同...</p>
                        </div>
                    </div>

                    <div class="dispute-card">
                        <div class="dispute-question">
                            争议焦点2：被告是否构成违约？
                        </div>
                        <button class="action-btn" onclick="revealJudgeResponse(this)">
                            查看法官如何回应
                        </button>
                        <div class="judge-response">
                            <h4>法官说理：</h4>
                            <p>关于违约责任问题，根据查明的事实，被告未按合同约定的时间、数量交付货物，构成违约...</p>
                        </div>
                    </div>
                </div>

                <!-- 模块4：苏格拉底式提问 -->
                <div id="module4" class="module-content">
                    <div class="module-header">
                        <h2>💭 苏格拉底式提问链</h2>
                        <p>从"授人以鱼"到"授人以渔"的飞跃</p>
                    </div>

                    <div class="ai-analysis-card">
                        <h3>🤖 AI生成的启发式问题</h3>
                        <div class="content">
                            基于案例分析，系统生成了以下深度思考问题
                        </div>
                    </div>

                    <div style="margin: 20px 0;">
                        <div class="dispute-card">
                            <div class="dispute-question">
                                🤔 如果原告选择以侵权责任法起诉，本案的争议焦点会发生什么变化？
                            </div>
                        </div>
                        <div class="dispute-card">
                            <div class="dispute-question">
                                🤔 本案中的证据链是否存在薄弱环节？如何加强？
                            </div>
                        </div>
                        <div class="dispute-card">
                            <div class="dispute-question">
                                🤔 从商业角度看，本案当事人可以采取哪些预防措施避免类似纠纷？
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 模块5：总结升华 -->
                <div id="module5" class="module-content">
                    <div class="module-header">
                        <h2>🎯 总结与升华</h2>
                        <p>将知识内化为能力</p>
                    </div>

                    <div class="ai-analysis-card">
                        <h3>📊 案件分析全景图</h3>
                        <div class="content">
                            系统已生成完整的案例分析思维导图，包含：<br>
                            • 请求权基础分析路径<br>
                            • 证据与要件对应关系<br>
                            • 争议焦点及裁判要旨<br>
                            • 关键法律适用要点
                        </div>
                    </div>

                    <div style="background: #f8f9fa; border-radius: 12px; padding: 20px; margin: 20px 0;">
                        <h3 style="color: #333; margin-bottom: 15px;">核心要点总结</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="margin-bottom: 10px;">✅ 请求权基础的选择决定了整个案件的分析路径</li>
                            <li style="margin-bottom: 10px;">✅ 证据必须与构成要件形成对应关系</li>
                            <li style="margin-bottom: 10px;">✅ 争议焦点的识别是案件审理的关键</li>
                            <li style="margin-bottom: 10px;">✅ 法官的三段论说理体现了法律适用的逻辑</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 右侧面板 -->
            <div class="right-panel">
                <!-- 进度指示 -->
                <div class="progress-indicator">
                    <h3 style="margin-bottom: 10px; color: #333;">教学进度</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 20%;"></div>
                    </div>
                    <div class="progress-text">1/5 模块完成</div>
                </div>

                <!-- 快速操作 -->
                <div class="quick-actions">
                    <h3>快速操作</h3>
                    <button class="action-btn" onclick="aiAutoFill()">
                        🤖 AI一键预填充
                    </button>
                    <button class="action-btn" onclick="saveTemplate()">
                        💾 保存为模板
                    </button>
                    <button class="action-btn" onclick="previewPPT()">
                        👁️ 预览PPT效果
                    </button>
                </div>

                <!-- 学生参与 -->
                <div class="student-participation">
                    <h3>📱 学生参与</h3>
                    <div class="qr-placeholder">
                        扫码加入课堂
                    </div>
                    <div class="participation-stats">
                        <div class="stat-item">
                            <div class="stat-value">45</div>
                            <div class="stat-label">在线人数</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">89%</div>
                            <div class="stat-label">参与率</div>
                        </div>
                    </div>
                </div>

                <!-- 随机点名 -->
                <div class="random-picker">
                    <h3>🎲 随机点名</h3>
                    <div class="picker-display" id="studentName">点击开始</div>
                    <button class="picker-btn" onclick="randomPick()">
                        开始点名
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 浮动提示 -->
    <div class="floating-tip" id="floatingTip">
        <button class="close-tip" onclick="closeTip()">×</button>
        <h4>💡 智能提示</h4>
        <p>系统检测到您是首次使用，建议先点击"AI一键预填充"，系统会自动分析判决书并填充所有内容。</p>
    </div>

    <script>
        // 切换模块
        function switchModule(moduleId, btn) {
            // 隐藏所有模块
            document.querySelectorAll('.module-content').forEach(m => {
                m.classList.remove('active');
            });
            
            // 显示选中模块
            document.getElementById(moduleId).classList.add('active');
            
            // 更新按钮状态
            document.querySelectorAll('.module-btn').forEach(b => {
                b.classList.remove('active');
            });
            btn.classList.add('active');
            
            // 更新进度条
            const moduleIndex = parseInt(moduleId.replace('module', ''));
            updateProgress(moduleIndex);
        }

        // 更新进度
        function updateProgress(step) {
            const percentage = (step / 5) * 100;
            document.querySelector('.progress-fill').style.width = percentage + '%';
            document.querySelector('.progress-text').textContent = `${step}/5 模块完成`;
        }

        // 选择请求权类型
        function selectRequestType(card) {
            document.querySelectorAll('.request-type-card').forEach(c => {
                c.classList.remove('selected');
            });
            card.classList.add('selected');
        }

        // 确认模块1
        function confirmModule1() {
            // 标记模块1完成
            document.querySelectorAll('.module-btn')[0].classList.add('completed');
            
            // 自动切换到模块2
            const module2Btn = document.querySelectorAll('.module-btn')[1];
            switchModule('module2', module2Btn);
            
            // 显示提示
            showNotification('案情导入模块已完成，进入证据对质环节');
        }

        // 拖拽功能
        function allowDrop(ev) {
            ev.preventDefault();
            ev.currentTarget.classList.add('drag-over');
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.getAttribute('data-evidence'));
            ev.target.classList.add('dragging');
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const draggedElement = document.querySelector(`[data-evidence="${data}"]`);
            
            // 克隆元素到目标区域
            const clone = draggedElement.cloneNode(true);
            clone.classList.remove('dragging');
            ev.currentTarget.querySelector('.dropped-evidence') ? 
                ev.currentTarget.querySelector('.dropped-evidence').appendChild(clone) :
                ev.currentTarget.appendChild(clone);
            
            // 从原位置移除
            draggedElement.style.display = 'none';
            
            ev.currentTarget.classList.remove('drag-over');
        }

        // 显示法官回应
        function revealJudgeResponse(btn) {
            const card = btn.parentElement;
            card.classList.add('revealed');
            btn.style.display = 'none';
        }

        // 随机点名
        const students = ['张三', '李四', '王五', '赵六', '钱七', '孙八', '周九', '吴十'];
        let pickInterval;

        function randomPick() {
            const display = document.getElementById('studentName');
            const btn = event.target;
            
            if (btn.textContent === '开始点名') {
                btn.textContent = '停止';
                pickInterval = setInterval(() => {
                    const randomIndex = Math.floor(Math.random() * students.length);
                    display.textContent = students[randomIndex];
                }, 100);
            } else {
                btn.textContent = '开始点名';
                clearInterval(pickInterval);
                
                // 最终选中效果
                setTimeout(() => {
                    display.style.color = '#ffd700';
                    showNotification(`已选中：${display.textContent}`);
                }, 200);
            }
        }

        // AI自动填充
        function aiAutoFill() {
            showNotification('AI正在分析判决书，预计需要30秒...');
            
            // 模拟AI填充过程
            setTimeout(() => {
                showNotification('AI分析完成！所有内容已自动填充');
                
                // 自动完成所有模块
                document.querySelectorAll('.module-btn').forEach(btn => {
                    btn.classList.add('completed');
                });
                
                updateProgress(5);
            }, 2000);
        }

        // 保存模板
        function saveTemplate() {
            showNotification('教学模板已保存，下次可直接使用');
        }

        // 预览PPT
        function previewPPT() {
            showNotification('正在生成PPT预览...');
        }

        // 生成PPT
        function generatePPT() {
            if (confirm('确认生成完整PPT？系统将整合所有模块内容。')) {
                showNotification('PPT生成中，预计需要1分钟...');
                
                setTimeout(() => {
                    showNotification('PPT生成成功！已下载到本地');
                }, 3000);
            }
        }

        // 显示通知
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #4caf50;
                color: white;
                padding: 15px 30px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideDown 0.5s;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // 关闭提示
        function closeTip() {
            document.getElementById('floatingTip').style.display = 'none';
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 5秒后自动隐藏浮动提示
            setTimeout(() => {
                const tip = document.getElementById('floatingTip');
                if (tip) {
                    tip.style.opacity = '0';
                    setTimeout(() => {
                        tip.style.display = 'none';
                    }, 500);
                }
            }, 10000);
        });
    </script>
</body>
</html>